## 异步控制并发数 ##

写一个函数，可以控制最大并发数。
例如最大并发10个，有一个成功后再追加一个请求。
```javascript
function promiseAll(urlList, num) {
    this.res = [];
    this.urlList = urlList;
    this.sum = urlList.length;
    this.curList = this.urlList.splice(0, num);
    let end = false;
    this.count = 0;
    return new Promise(function(resolve, rejetc) {
        this.runTask(resolve);
    })
}

promiseAll.prototype.runTask = function(resolve, rejetc) {
    for(let i = 0; i < this.curList.length; i++) {
        const url = this.curList.shift();
        fetch(url).then(res => {
            this.count++
            this.res.push(res);
            if(this.urlList.length) {
                this.curList.push(this.urlList.splice(0, 1));
                this.runTask();
            }
            if(this.count === this.sum) {
                resolve(this.res);
            }
        }).catch(err => {
            rejetc() 
        })

    }
}
```
